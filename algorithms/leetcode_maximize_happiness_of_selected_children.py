def maximum_happiness_sum(happiness: list[int], k: int) -> int:
    max_happiness = 0

    happiness.sort(reverse=True)

    for i in range(k):
        gain = happiness[i] - i
        if gain <= 0:
            return max_happiness
        max_happiness += gain

    return max_happiness


print(maximum_happiness_sum([1, 1, 1, 1], 2))
print(maximum_happiness_sum([2, 3, 4, 5], 1))
print(maximum_happiness_sum(
    [4494, 8988, 9202, 321, 1926, 8774, 9737, 3317, 1284, 7918, 9844, 2140, 9095, 4708, 1177, 4066, 4173, 6848, 4601,
     5243, 3745, 6527, 10593, 9309, 6206, 7490, 10379, 5992, 7811, 1605, 3424, 1712, 2568, 2996, 10486, 3959, 2461,
     7169, 4815, 4280, 1819, 2033, 1070, 2247, 8025, 9416, 856, 4387, 5136, 5778, 4922, 2675, 535, 8881, 3103, 6313,
     2354, 7704, 642, 7276, 3852, 2889, 5457, 3210, 1391, 428, 10165, 8560, 7597, 6634, 10700, 749, 8453, 7383, 10058,
     5564, 9951, 5671, 3531, 2782, 1498, 5350, 214, 6741, 6420, 107, 5885, 3638, 8667, 5029, 8132, 6955, 8346, 8239,
     963, 9523, 9630, 10272, 7062, 6099], 4))
